exports.id=612,exports.ids=[612],exports.modules={5308:(e,t,r)=>{Promise.resolve().then(r.bind(r,6931))},7261:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},11314:(e,t,r)=>{"use strict";r.d(t,{C:()=>s});var o=r(67353);let s={async getFieldInstructions(e){try{return(await o.A.get(`/field-instructions/apartment/${e}`)).data}catch(e){throw console.error("Error fetching field instructions:",e),e}},async createFieldInstruction(e,t){try{return(await o.A.post(`/field-instructions/apartment/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw console.error("Error creating field instruction:",e),e}},async updateFieldInstruction(e,t){try{return(await o.A.put(`/field-instructions/${e}`,t)).data}catch(e){throw console.error("Error updating field instruction:",e),e}},async deleteFieldInstruction(e){try{await o.A.delete(`/field-instructions/${e}`)}catch(e){throw console.error("Error deleting field instruction:",e),e}},async getFieldInstruction(e){try{return(await o.A.get(`/field-instructions/${e}`)).data}catch(e){throw console.error("Error fetching field instruction:",e),e}},async updateInstructionStatus(e,t){try{return(await o.A.patch(`/field-instructions/${e}/status`,{status:t})).data}catch(e){throw console.error("Error updating instruction status:",e),e}},async updateStepCompletion(e,t,r){try{return(await o.A.patch(`/field-instructions/${e}/steps/${t}`,{completed:r})).data}catch(e){throw console.error("Error updating step completion:",e),e}}}},20971:(e,t,r)=>{"use strict";r.d(t,{L:()=>s});var o=r(67353);let s={async getProgressEntries(e){try{return(await o.A.get(`/progress/apartment/${e}`)).data}catch(e){throw console.error("Error fetching progress entries:",e),e}},async createProgressEntry(e,t){try{return(await o.A.post(`/progress/apartment/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw console.error("Error creating progress entry:",e),e}},async updateProgressEntry(e,t){try{return(await o.A.put(`/progress/${e}`,t)).data}catch(e){throw console.error("Error updating progress entry:",e),e}},async deleteProgressEntry(e){try{await o.A.delete(`/progress/${e}`)}catch(e){throw console.error("Error deleting progress entry:",e),e}},async getProgressEntry(e){try{return(await o.A.get(`/progress/${e}`)).data}catch(e){throw console.error("Error fetching progress entry:",e),e}}}},24934:(e,t,r)=>{"use strict";r.d(t,{$:()=>l,r:()=>c});var o=r(60687),s=r(43210),a=r(8730),n=r(24224),i=r(96241);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...n},l)=>{let d=s?a.DX:"button";return(0,o.jsx)(d,{className:(0,i.cn)(c({variant:t,size:r,className:e})),ref:l,...n})});l.displayName="Button"},27586:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var o=r(60687),s=r(16189),a=r(85814),n=r.n(a),i=r(32192),c=r(35020),l=r(97051),d=r(58869),u=r(43210);r(82657);var g=r(59821),p=r(32254);function f(){let e=(0,s.usePathname)(),[t,r]=(0,u.useState)(!1),{unreadCount:a}=(0,p.E)(),f=t=>!!("/"===t&&"/"===e||"/"!==t&&e.startsWith(t));return(0,o.jsx)("div",{className:"fixed bottom-0 left-0 right-0 border-t bg-background",children:(0,o.jsxs)("div",{className:"flex justify-around items-center h-16",children:[(0,o.jsx)(n(),{href:"/",className:"flex flex-col items-center justify-center w-full",children:(0,o.jsxs)("div",{className:`flex flex-col items-center justify-center ${f("/")?"text-primary":"text-muted-foreground"}`,children:[(0,o.jsx)(i.A,{className:"h-5 w-5"}),(0,o.jsx)("span",{className:"text-xs mt-1",children:"Home"})]})}),(0,o.jsx)(n(),{href:"/projects",className:"flex flex-col items-center justify-center w-full",children:(0,o.jsxs)("div",{className:`flex flex-col items-center justify-center ${f("/projects")?"text-primary":"text-muted-foreground"}`,children:[(0,o.jsx)(c.A,{className:"h-5 w-5"}),(0,o.jsx)("span",{className:"text-xs mt-1",children:"Projects"})]})}),(0,o.jsx)(n(),{href:"/alerts",className:"flex flex-col items-center justify-center w-full",children:(0,o.jsxs)("div",{className:`flex flex-col items-center justify-center ${f("/alerts")?"text-primary":"text-muted-foreground"}`,children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(l.A,{className:"h-5 w-5"}),a>0&&(0,o.jsx)(g.E,{variant:"destructive",className:"absolute -top-2 -right-2 h-4 w-4 p-0 flex items-center justify-center text-[10px] rounded-full",children:a>9?"9+":a})]}),(0,o.jsx)("span",{className:"text-xs mt-1",children:"Alerts"})]})}),(0,o.jsx)(n(),{href:"/profile",className:"flex flex-col items-center justify-center w-full",children:(0,o.jsxs)("div",{className:`flex flex-col items-center justify-center ${f("/profile")?"text-primary":"text-muted-foreground"}`,children:[(0,o.jsx)(d.A,{className:"h-5 w-5"}),(0,o.jsx)("span",{className:"text-xs mt-1",children:"Profile"})]})})]})})}},32254:(e,t,r)=>{"use strict";r.d(t,{E:()=>a});var o=r(43210),s=r(82657);let a=()=>{let[e,t]=(0,o.useState)(0),[r,a]=(0,o.useState)(!1),n=(0,o.useCallback)(async()=>{try{a(!0);let e=await s.lY.getUnreadCount();t(e)}catch(e){console.error("Failed to fetch unread notifications count:",e),t(0)}finally{a(!1)}},[]),i=(0,o.useCallback)(async e=>{try{if(await s.lY.markAsRead(e))return t(e=>Math.max(0,e-1)),!0;return!1}catch(e){return console.error("Error marking notification as read:",e),!1}},[]),c=(0,o.useCallback)(async()=>{try{if(await s.lY.markAllAsRead())return t(0),!0;return!1}catch(e){return console.error("Error marking all notifications as read:",e),!1}},[]);return(0,o.useEffect)(()=>{n();let e=setInterval(()=>{n()},6e4);return()=>clearInterval(e)},[n]),{unreadCount:e,isLoading:r,fetchUnreadCount:n,markAsRead:i,markAllAsRead:c}}},44391:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var o=r(67353);let s={getAllUsers:async()=>(await o.A.get("/users/admin/users")).data,deleteUser:async e=>(await o.A.delete(`/users/admin/users/${e}`)).data,isAdmin:async()=>{try{return(await o.A.get("/users/check-admin")).data.isAdmin}catch(e){return console.error("Admin check error:",e),!1}},getProjectSubscriptions:async()=>(await o.A.get("/subscriptions")).data,subscribeToProject:async e=>(await o.A.post(`/subscriptions/${e}/subscribe`)).data,unsubscribeFromProject:async e=>(await o.A.post(`/subscriptions/${e}/unsubscribe`)).data,toggleProjectSubscription:async e=>(await o.A.post(`/subscriptions/${e}/toggle`)).data}},46055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var o=r(31658);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,o.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},57027:(e,t,r)=>{"use strict";r.d(t,{F:()=>s});var o=r(67353);let s={async getSiteNotes(e){try{return(await o.A.get(`/site-notes/apartment/${e}`)).data}catch(e){throw console.error("Error fetching site notes:",e),e}},getSiteNotesByStatus:async(e,t)=>(await o.A.get(`/site-notes/apartment/${e}/status/${t}`)).data,async createSiteNote(e,t){try{return(await o.A.post(`/site-notes/apartment/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw console.error("Error creating site note:",e),e}},async updateSiteNote(e,t){try{return(await o.A.put(`/site-notes/${e}`,t)).data}catch(e){throw console.error("Error updating site note:",e),e}},async deleteSiteNote(e){try{await o.A.delete(`/site-notes/${e}`)}catch(e){throw console.error("Error deleting site note:",e),e}},async getSiteNote(e){try{return(await o.A.get(`/site-notes/${e}`)).data}catch(e){throw console.error("Error fetching site note:",e),e}},async toggleCompletion(e,t){try{return(await o.A.patch(`/site-notes/${e}/completion`,{completed:t})).data}catch(e){throw console.error("Error toggling site note completion:",e),e}}}},57729:()=>{},58014:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>a});var o=r(37413);r(82704);var s=r(6931);let a={title:"Project Manager",description:"A project management application",generator:"v0.dev"};function n({children:e}){return(0,o.jsx)("html",{lang:"en",children:(0,o.jsxs)("body",{children:[e,(0,o.jsx)(s.Toaster,{position:"top-right"})]})})}},59821:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var o=r(60687);r(43210);var s=r(24224),a=r(96241);let n=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...r}){return(0,o.jsx)("div",{className:(0,a.cn)(n({variant:t}),e),...r})}},63452:(e,t,r)=>{Promise.resolve().then(r.bind(r,52581))},67353:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var o=r(51060);let s=process.env.NEXT_PUBLIC_API_URL||"https://my-manager-api-8xme.onrender.com/api",a=()=>null,n=o.A.create({baseURL:s,headers:{"Content-Type":"application/json"},timeout:15e3,maxRedirects:3,maxContentLength:0x3200000,maxBodyLength:0xa00000,validateStatus:e=>e>=200&&e<300});n.interceptors.request.use(e=>{let t=a();return console.log("=== API REQUEST DEBUG ==="),console.log("Full URL:",(e.baseURL||"")+(e.url||"")),console.log("Method:",e.method?.toUpperCase()),console.log("Headers:",e.headers),console.log("Data:",e.data),console.log("Auth token present:",!!t),t?e.headers.Authorization=`Bearer ${t}`:console.log("No auth token available for request to:",e.url),e.metadata={startTime:Date.now()},e},e=>Promise.reject(e)),n.interceptors.response.use(e=>{let t=Date.now()-(e.config.metadata?.startTime||0);return console.log("=== API RESPONSE DEBUG ==="),console.log("Status:",e.status),console.log("URL:",e.config.url),console.log("Data:",e.data),console.log("Duration:",t+"ms"),t>2e3&&console.warn(`Slow API request: ${e.config.method?.toUpperCase()} ${e.config.url} took ${t}ms`),e},e=>{let t=Date.now()-(e.config?.metadata?.startTime||0);return"ECONNABORTED"===e.code?console.error(`Request timeout after ${t}ms. Server might be starting up if using Render free tier.`):e.response?e.response&&(401===e.response.status?console.error("Authentication error:",e.response.data):403===e.response.status?(console.error("Authorization error:",e.response.data),console.log("Current user lacks permission for this resource")):502===e.response.status||503===e.response.status?console.error("Server unavailable. May be starting up if on free tier."):e.response.status>=500&&console.error("Server error:",e.response.status,e.response.data),t>2e3&&console.warn(`Slow failed API request: ${e.config?.method?.toUpperCase()} ${e.config?.url} took ${t}ms`)):console.error("Network error:",e.message),Promise.reject(e)});let i=n},79645:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},82657:(e,t,r)=>{"use strict";r.d(t,{ZJ:()=>d.A,WG:()=>g,y1:()=>a,lY:()=>l,$p:()=>i});var o=r(67353);let s={setToken:e=>{},getToken:()=>null,removeToken:()=>{}},a={register:async e=>{console.log("=== REGISTER ATTEMPT ==="),console.log("User data:",{username:e.username,email:e.email,name:e.name,password:"***"}),console.log("API URL:",process.env.NEXT_PUBLIC_API_URL||"https://my-manager-api-8xme.onrender.com/api");try{let t=await o.A.post("/users/register",e);if(console.log("Register response received:",t.status,t.data),t.data.token)s.setToken(t.data.token),console.log("Token saved after registration:",t.data.token.substring(0,15)+"...");else throw console.error("No token received in register response"),Error("No authentication token received");return t.data}catch(e){if(console.error("Register error details:",{message:e.message,status:e.response?.status,data:e.response?.data,config:{url:e.config?.url,method:e.config?.method,headers:e.config?.headers}}),e.response?.status===400)throw Error(e.response?.data?.message||"Invalid registration data");if(e.response?.status===409)throw Error("Username or email already exists");if(e.response?.status===500)throw Error("Server error. Please try again later.");else if(e.response)throw Error(e.response?.data?.message||"Registration failed");else throw Error("Network error. Please check your connection.")}},login:async e=>{console.log("=== LOGIN ATTEMPT ==="),console.log("Credentials:",{username:e.username,password:"***"}),console.log("API URL:",process.env.NEXT_PUBLIC_API_URL||"https://my-manager-api-8xme.onrender.com/api");try{let t=await o.A.post("/users/login",e);if(console.log("Login response received:",t.status,t.data),t.data.token)s.setToken(t.data.token),console.log("Token saved after login:",t.data.token.substring(0,15)+"...");else throw console.error("No token received in login response"),Error("No authentication token received");return t.data}catch(e){if(console.error("Login error details:",{message:e.message,status:e.response?.status,data:e.response?.data,config:{url:e.config?.url,method:e.config?.method,headers:e.config?.headers}}),e.response?.status===401)throw Error("Invalid username or password");if(e.response?.status===404)throw Error("User not found");if(e.response?.status===500)throw Error("Server error. Please try again later.");else if(e.response)throw Error(e.response?.data?.message||"Login failed");else throw Error("Network error. Please check your connection.")}},logout:()=>{console.log("Logout called - removing token from all storage"),s.removeToken()},getProfile:async()=>{console.log("Getting profile - checking token...");let e=s.getToken();console.log("Current token:",e?e.substring(0,15)+"...":"No token found");try{let e=await o.A.get("/users/profile");return console.log("Profile fetch successful"),e.data}catch(e){throw console.error("Profile fetch failed:",e?.response?.status,e?.response?.data),e}},updateProfile:async e=>(await o.A.put("/users/profile",e)).data,isAuthenticated:()=>(console.log("isAuthenticated: window undefined (SSR)"),!1)},n=e=>/^[0-9a-fA-F]{24}$/.test(e),i={getAllProjects:async()=>(await o.A.get("/projects")).data,getProjectById:async e=>{if(!e||"string"!=typeof e)throw Error("Invalid project ID: ID is missing or not a string");if(!n(e))throw Error("Invalid project ID format: must be a valid MongoDB ObjectId");try{return(await o.A.get(`/projects/${e}`)).data}catch(e){throw console.error("Error fetching project:",e),e}},createProject:async e=>(await o.A.post("/projects",e)).data,updateProject:async(e,t)=>{if(!e||!n(e))throw Error("Invalid project ID");return(await o.A.put(`/projects/${e}`,t)).data},deleteProject:async e=>{if(!e||!n(e))throw Error("Invalid project ID");return(await o.A.delete(`/projects/${e}`)).data}},c={getNotifications:async()=>{try{let e=await o.A.get("/notifications");return Array.isArray(e.data)?e.data:[]}catch(e){if(e?.response?.status===401)return console.log("User not authenticated for notifications"),[];return console.error("Failed to fetch notifications:",e),[]}},markAsRead:async e=>{try{return(await o.A.put(`/notifications/${e}/read`)).data}catch(e){if(e?.response?.status===401)return console.log("User not authenticated for marking notification as read"),null;return console.error("Failed to mark notification as read:",e),null}},markAllAsRead:async()=>{try{return(await o.A.put("/notifications/read-all")).data}catch(e){if(e?.response?.status===401)return console.log("User not authenticated for marking all notifications as read"),null;return console.error("Failed to mark all notifications as read:",e),null}},deleteNotification:async e=>{try{return(await o.A.delete(`/notifications/${e}`)).data}catch(e){if(e?.response?.status===401)return console.log("User not authenticated for deleting notification"),null;return console.error("Failed to delete notification:",e),null}},getUnreadCount:async()=>{try{let e=await c.getNotifications();if(!Array.isArray(e))return console.warn("Notifications is not an array:",e),0;return e.filter(e=>!e.isRead).length}catch(e){return console.error("Failed to get unread count:",e),0}}},l=c;var d=r(44391);class u{async getApartmentsByProject(e){return(await o.A.get(`/apartments/project/${e}`)).data}async createApartment(e,t){return(await o.A.post(`/apartments/project/${e}`,t)).data}async updateApartment(e,t){return(await o.A.put(`/apartments/${e}`,t)).data}async deleteApartment(e){await o.A.delete(`/apartments/${e}`)}async getApartmentById(e){return(await o.A.get(`/apartments/${e}`)).data}}let g=new u;r(20971),r(57027),r(11314)},82704:()=>{},96241:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var o=r(49384),s=r(82348);function a(...e){return(0,s.QP)((0,o.$)(e))}}};