"use strict";exports.id=938,exports.ids=[938],exports.modules={15616:(e,s,t)=>{t.d(s,{T:()=>i});var a=t(60687),r=t(43210),l=t(96241);let i=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...s}));i.displayName="Textarea"},15938:(e,s,t)=>{t.d(s,{default:()=>w});var a=t(60687),r=t(43210),l=t(16189),i=t(24934),n=t(86287),d=t(85910),c=t(72840),o=t(28559),m=t(79410),x=t(40228),h=t(48730),p=t(27586),u=t(82657),j=t(52581),g=t(59821),f=t(63974),N=t(61470),v=t(47606),y=t(83580),b=t(11314);function w({apartmentId:e}){let s=(0,l.useRouter)(),[t,w]=(0,r.useState)(null),[C,S]=(0,r.useState)(!0),[P,k]=(0,r.useState)(""),[A,F]=(0,r.useState)(!1),[D,T]=(0,r.useState)(""),[L,R]=(0,r.useState)(!1),[$,I]=(0,r.useState)(!1),[E,W]=(0,r.useState)([]),[J,O]=(0,r.useState)(0),M=e=>{if(!e||0===e.length)return 0;let s=0,t=0;return e.forEach(e=>{e.steps&&e.steps.length>0&&(s+=e.steps.length,t+=e.steps.filter(e=>e.completed).length)}),s>0?Math.round(t/s*100):0},z=async()=>{try{let s=await b.C.getFieldInstructions(e);W(s);let t=M(s);O(t)}catch(e){console.error("Failed to fetch instructions:",e)}},U=async s=>{if(t)try{R(!0);let t=await u.WG.updateApartment(e,{status:s});w(t),j.o.success(`Apartment status updated to ${s}`)}catch(e){console.error("Failed to update apartment status:",e),j.o.error("Failed to update apartment status")}finally{R(!1)}};return!$||C?(0,a.jsxs)("div",{className:"flex min-h-screen flex-col pb-16 items-center justify-center",children:[(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading apartment details..."})}),(0,a.jsx)(p.A,{})]}):P||!t?(0,a.jsxs)("div",{className:"flex min-h-screen flex-col pb-16 items-center justify-center",children:[(0,a.jsxs)("div",{className:"text-center py-12",children:[A?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)(c.A,{className:"h-12 w-12 text-red-500"})}),(0,a.jsx)("p",{className:"text-red-500 font-medium text-lg mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"You don't have permission to view this apartment."})]}):(0,a.jsx)("p",{className:"text-red-500",children:P||"Apartment not found"}),(0,a.jsx)(i.$,{className:"mt-4",onClick:()=>s.push("/projects"),children:"Back to Projects"})]}),(0,a.jsx)(p.A,{})]}):(0,a.jsxs)("div",{className:"flex min-h-screen flex-col pb-16",children:[(0,a.jsxs)("div",{className:"flex items-center p-4 border-b",children:[(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>s.back(),children:(0,a.jsx)(o.A,{className:"h-5 w-5"})}),(0,a.jsx)("h1",{className:"text-xl font-bold",children:"Apartment Details"})]}),(0,a.jsxs)("div",{className:"p-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),t.name]}),t.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(g.E,{className:(e=>{switch(e){case"Not Started":default:return"bg-gray-500";case"In Progress":return"bg-blue-500";case"Completed":return"bg-green-500"}})(t.status),children:t.status})})]}),(0,a.jsx)("div",{className:"mt-4 p-3 border rounded-md bg-muted/30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Apartment Status:"}),(0,a.jsx)("div",{className:"w-48",children:(0,a.jsxs)(f.l6,{value:t.status,onValueChange:U,disabled:L,children:[(0,a.jsx)(f.bq,{className:"h-8",children:(0,a.jsx)(f.yv,{placeholder:"Select status"})}),(0,a.jsxs)(f.gC,{children:[(0,a.jsx)(f.eb,{value:"Not Started",children:"Not Started"}),(0,a.jsx)(f.eb,{value:"In Progress",children:"In Progress"}),(0,a.jsx)(f.eb,{value:"Completed",children:"Completed"})]})]})})]})}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Overall Progress"}),(0,a.jsxs)("span",{children:[J,"%"]})]}),(0,a.jsx)(n.k,{value:J,className:"h-2"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Based on ",E.length," instruction",1!==E.length?"s":""," with completed steps"]})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-1"}),(0,a.jsxs)("span",{children:["Created: ",new Date(t.createdAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-1"}),(0,a.jsxs)("span",{children:["#",t.number]})]})]})]}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)(d.Tabs,{defaultValue:"progress",className:"w-full",children:[(0,a.jsxs)(d.TabsList,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(d.TabsTrigger,{value:"progress",children:"Project Progress"}),(0,a.jsx)(d.TabsTrigger,{value:"notes",children:"Site Notes"}),(0,a.jsx)(d.TabsTrigger,{value:"instructions",children:"Field Instructions"})]}),(0,a.jsx)(d.TabsContent,{value:"progress",className:"p-4",children:(0,a.jsx)(y.default,{apartmentId:e})}),(0,a.jsx)(d.TabsContent,{value:"notes",className:"p-4",children:(0,a.jsx)(N.default,{apartmentId:e})}),(0,a.jsx)(d.TabsContent,{value:"instructions",className:"p-4",children:(0,a.jsx)(v.default,{apartmentId:e,onInstructionUpdate:z})})]})}),(0,a.jsx)(p.A,{})]})}},33135:(e,s,t)=>{t.d(s,{AM:()=>n,Wv:()=>d,hl:()=>c});var a=t(60687),r=t(43210),l=t(40599),i=t(96241);let n=l.bL,d=l.l9,c=r.forwardRef(({className:e,align:s="center",sideOffset:t=4,...r},n)=>(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{ref:n,align:s,sideOffset:t,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));c.displayName=l.UC.displayName},37826:(e,s,t)=>{t.d(s,{Cf:()=>x,L3:()=>p,c7:()=>h,lG:()=>d,rr:()=>u,zM:()=>c});var a=t(60687),r=t(43210),l=t(26134),i=t(11860),n=t(96241);let d=l.bL,c=l.l9,o=l.ZL;l.bm;let m=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));m.displayName=l.hJ.displayName;let x=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(l.UC,{ref:r,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));x.displayName=l.UC.displayName;let h=({className:e,...s})=>(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});h.displayName="DialogHeader";let p=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));p.displayName=l.hE.displayName;let u=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));u.displayName=l.VY.displayName},39390:(e,s,t)=>{t.d(s,{J:()=>c});var a=t(60687),r=t(43210),l=t(78148),i=t(24224),n=t(96241);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.b,{ref:t,className:(0,n.cn)(d(),e),...s}));c.displayName=l.b.displayName},47606:(e,s,t)=>{t.d(s,{default:()=>$});var a=t(60687),r=t(43210),l=t(24934),i=t(55192),n=t(59821),d=t(93437),c=t(86287),o=t(96474),m=t(10022),x=t(97992),h=t(58869),p=t(40228),u=t(13861),j=t(37826),g=t(63974),f=t(85650),N=t(68988),v=t(15616),y=t(39390),b=t(56924),w=t(33135),C=t(88233),S=t(11860),P=t(96241),k=t(52581),A=t(11314);let F=["Construction Task","Installation","Repair/Maintenance","Inspection","Safety Protocol","Quality Control","Material Handling","Equipment Operation","Other"],D=[{value:"low",label:"Low",color:"bg-green-100 text-green-800"},{value:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"High",color:"bg-red-100 text-red-800"},{value:"urgent",label:"Urgent",color:"bg-red-600 text-white"}];function T({apartmentId:e,onSuccess:s,onCancel:t}){let[i,n]=(0,r.useState)(!1),[d,c]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[h,u]=(0,r.useState)("medium"),[j,T]=(0,r.useState)(""),[L,R]=(0,r.useState)(""),[$,I]=(0,r.useState)(""),[E,W]=(0,r.useState)(void 0),[J,O]=(0,r.useState)(""),[M,z]=(0,r.useState)(""),[U,G]=(0,r.useState)(""),[_,q]=(0,r.useState)([]),[V,Z]=(0,r.useState)([]),[B,H]=(0,r.useState)([]),Y=e=>{Z(s=>s.filter((s,t)=>t!==e)),H(s=>{let t=s.filter((s,t)=>t!==e);return URL.revokeObjectURL(s[e]),t})},K=(e,s)=>{q(t=>t.map(t=>t.id===e?{...t,description:s}:t))},Q=e=>{q(s=>s.filter(s=>s.id!==e).map((e,s)=>({...e,order:s+1})))},X=async t=>{if(t.preventDefault(),!d.trim()){k.o.error("Please enter a title");return}if(!m){k.o.error("Please select an instruction type");return}if(!j.trim()){k.o.error("Please enter a description");return}if(0===_.length){k.o.error("Please add at least one step");return}let a=_.filter(e=>e.description.trim());if(a.length!==_.length){k.o.error("Please fill in all step descriptions");return}try{n(!0);let t=new FormData;t.append("title",d.trim()),t.append("instructionType",m),t.append("priority",h),t.append("description",j.trim()),t.append("location",L.trim()),t.append("assignedTo",$.trim()),E&&t.append("dueDate",E.toISOString()),t.append("materials",J.trim()),t.append("tools",M.trim()),t.append("safetyNotes",U.trim()),t.append("steps",JSON.stringify(a)),V.forEach((e,s)=>{t.append("photos",e)}),await A.C.createFieldInstruction(e,t),k.o.success("Field instruction created successfully"),s()}catch(e){console.error("Failed to create field instruction:",e),k.o.error("Failed to create field instruction")}finally{n(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create Field Instruction"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Create detailed instructions for field work tasks."})]}),(0,a.jsxs)("form",{onSubmit:X,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.J,{htmlFor:"title",children:"Title"}),(0,a.jsx)(N.p,{id:"title",value:d,onChange:e=>c(e.target.value),placeholder:"Brief title for the instruction",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.J,{htmlFor:"instructionType",children:"Instruction Type"}),(0,a.jsxs)(g.l6,{value:m,onValueChange:x,children:[(0,a.jsx)(g.bq,{children:(0,a.jsx)(g.yv,{placeholder:"Select instruction type"})}),(0,a.jsx)(g.gC,{children:F.map(e=>(0,a.jsx)(g.eb,{value:e,children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.J,{htmlFor:"priority",children:"Priority"}),(0,a.jsxs)(g.l6,{value:h,onValueChange:u,children:[(0,a.jsx)(g.bq,{children:(0,a.jsx)(g.yv,{})}),(0,a.jsx)(g.gC,{children:D.map(e=>(0,a.jsx)(g.eb,{value:e.value,children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:`px-2 py-1 rounded text-xs ${e.color}`,children:e.label})})},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.J,{htmlFor:"location",children:"Location"}),(0,a.jsx)(N.p,{id:"location",value:L,onChange:e=>R(e.target.value),placeholder:"e.g., Kitchen, Bathroom, Exterior"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.J,{htmlFor:"assignedTo",children:"Assigned To"}),(0,a.jsx)(N.p,{id:"assignedTo",value:$,onChange:e=>I(e.target.value),placeholder:"Worker name or team"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(v.T,{id:"description",value:j,onChange:e=>T(e.target.value),placeholder:"Detailed description of the work to be done...",rows:3,required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.J,{htmlFor:"materials",children:"Required Materials"}),(0,a.jsx)(v.T,{id:"materials",value:J,onChange:e=>O(e.target.value),placeholder:"List required materials...",rows:2})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.J,{htmlFor:"tools",children:"Required Tools"}),(0,a.jsx)(v.T,{id:"tools",value:M,onChange:e=>z(e.target.value),placeholder:"List required tools...",rows:2})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.J,{htmlFor:"safetyNotes",children:"Safety Notes"}),(0,a.jsx)(v.T,{id:"safetyNotes",value:U,onChange:e=>G(e.target.value),placeholder:"Important safety considerations...",rows:2})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.J,{children:"Due Date (Optional)"}),(0,a.jsxs)(w.AM,{children:[(0,a.jsx)(w.Wv,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",className:(0,P.cn)("w-full justify-start text-left font-normal",!E&&"text-muted-foreground"),children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"}),E?(0,f.GP)(E,"PPP"):"Select due date"]})}),(0,a.jsx)(w.hl,{className:"w-auto p-0",children:(0,a.jsx)(b.V,{mode:"single",selected:E,onSelect:W,initialFocus:!0})})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(y.J,{children:"Work Steps"}),(0,a.jsxs)(l.$,{type:"button",size:"sm",onClick:()=>{let e={id:Date.now().toString(),description:"",order:_.length+1};q(s=>[...s,e])},children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-1"}),"Add Step"]})]}),0===_.length?(0,a.jsxs)("div",{className:"text-center py-4 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,a.jsx)("p",{className:"text-gray-500",children:"No steps added yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:'Click "Add Step" to create work instructions'})]}):(0,a.jsx)("div",{className:"space-y-3",children:_.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-medium",children:e.order}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(v.T,{value:e.description,onChange:s=>K(e.id,s.target.value),placeholder:`Step ${e.order}: Describe what needs to be done...`,rows:2,className:"resize-none"})}),(0,a.jsx)(l.$,{type:"button",size:"sm",variant:"outline",onClick:()=>Q(e.id),className:"flex-shrink-0",children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]},e.id))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.J,{children:"Reference Photos (Optional)"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(N.p,{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let s=Array.from(e.target.files||[]),t=s.filter(e=>e.type.startsWith("image/"));if(t.length!==s.length){k.o.error("Please select only image files");return}if(V.length+t.length>5){k.o.error("Maximum 5 photos allowed");return}Z(e=>[...e,...t]),t.forEach(e=>{let s=URL.createObjectURL(e);H(e=>[...e,s])})},className:"flex-1"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[V.length,"/5"]})]}),B.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:B.map((e,s)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e,alt:`Instruction photo ${s+1}`,className:"w-full h-24 object-cover rounded-md"}),(0,a.jsx)(l.$,{type:"button",size:"sm",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>Y(s),children:(0,a.jsx)(S.A,{className:"h-3 w-3"})})]},s))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,a.jsx)(l.$,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),(0,a.jsx)(l.$,{type:"submit",disabled:i,children:i?"Creating...":"Create Instruction"})]})]})]})}let L={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-red-100 text-red-800",urgent:"bg-red-600 text-white"},R={Created:"bg-gray-100 text-gray-800","Work Started":"bg-blue-100 text-blue-800",Completed:"bg-green-100 text-green-800"};function $({apartmentId:e,onInstructionUpdate:s}){let[t,N]=(0,r.useState)([]),[v,y]=(0,r.useState)(!0),[b,w]=(0,r.useState)(""),[C,S]=(0,r.useState)(!1),[P,F]=(0,r.useState)(null),[D,$]=(0,r.useState)(!1),I=async()=>{try{y(!0),w("");let s=await A.C.getFieldInstructions(e);N(s)}catch(e){console.error("Failed to fetch field instructions:",e),w(e?.response?.data?.message||"Failed to load field instructions"),k.o.error("Failed to load field instructions")}finally{y(!1)}},E=e=>{F(e),$(!0)},W=e=>e.steps&&0!==e.steps.length?Math.round(e.steps.filter(e=>e.completed).length/e.steps.length*100):0,J=async(e,t,a)=>{try{await A.C.updateStepCompletion(e,t,a),I(),s&&s(),k.o.success(a?"Step marked as completed":"Step marked as incomplete")}catch(e){console.error("Failed to update step completion:",e),k.o.error("Failed to update step completion")}},O=async(e,t)=>{try{await A.C.updateInstructionStatus(e,t),I(),s&&s(),k.o.success(`Instruction status updated to ${t}`)}catch(e){console.error("Failed to update instruction status:",e),k.o.error("Failed to update instruction status")}};if(v)return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Field Instructions"}),(0,a.jsxs)(l.$,{disabled:!0,children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Create Instruction"]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:[1,2,3].map(e=>(0,a.jsx)(i.Zp,{className:"animate-pulse",children:(0,a.jsxs)(i.Wu,{className:"p-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})},e))})]});if(b)return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Field Instructions"}),(0,a.jsxs)(l.$,{onClick:I,children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Create Instruction"]})]}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:b}),(0,a.jsx)(l.$,{onClick:I,variant:"outline",children:"Try Again"})]})]});let M=t.filter(e=>"urgent"===e.priority||"high"===e.priority),z=(()=>{let e=new Date;return t.filter(s=>s.dueDate&&new Date(s.dueDate)<e&&"Completed"!==s.status)})();return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Field Instructions"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t.length," instructions • ",M.length," urgent • ",z.length," overdue"]})]}),(0,a.jsxs)(j.lG,{open:C,onOpenChange:S,children:[(0,a.jsx)(j.zM,{asChild:!0,children:(0,a.jsxs)(l.$,{children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Create Instruction"]})}),(0,a.jsxs)(j.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(j.c7,{children:(0,a.jsx)(j.L3,{children:"Create Field Instruction"})}),(0,a.jsx)(T,{apartmentId:e,onSuccess:()=>{S(!1),I()},onCancel:()=>S(!1)})]})]})]}),t.length>0&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Created"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-800",children:t.filter(e=>"Created"===e.status).length})]}),(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-blue-600",children:"Work Started"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-blue-800",children:t.filter(e=>"Work Started"===e.status).length})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-green-600",children:"Completed"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-green-800",children:t.filter(e=>"Completed"===e.status).length})]})]}),0===t.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(m.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No field instructions yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Create detailed work instructions for your team"})]}):(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsxs)(i.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(i.ZB,{className:"text-base",children:e.title}),(0,a.jsx)(n.E,{className:L[e.priority],children:e.priority}),(0,a.jsx)(n.E,{className:R[e.status],children:e.status})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"h-3 w-3"}),e.instructionType]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"h-3 w-3"}),e.location||"No location"]}),e.assignedTo&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"h-3 w-3"}),e.assignedTo]}),e.dueDate&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(p.A,{className:"h-3 w-3"}),(0,f.GP)(new Date(e.dueDate),"MMM dd")]})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:e.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(n.E,{variant:"outline",children:[e.steps?.length||0," steps"]}),e.images?.length>0&&(0,a.jsxs)(n.E,{variant:"outline",children:[e.images.length," photos"]}),(0,a.jsxs)(n.E,{variant:"outline",className:"bg-blue-50 text-blue-700",children:[W(e),"% complete"]})]})]})}),(0,a.jsxs)(i.Wu,{className:"pt-0",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-1",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[W(e),"%"]})]}),(0,a.jsx)(c.k,{value:W(e),className:"h-2"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Created ",(0,f.GP)(new Date(e.createdAt),"PPp")]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(g.l6,{value:e.status,onValueChange:s=>O(e._id,s),children:[(0,a.jsx)(g.bq,{className:"w-32 h-8 text-xs",children:(0,a.jsx)(g.yv,{})}),(0,a.jsxs)(g.gC,{children:[(0,a.jsx)(g.eb,{value:"Created",children:"Created"}),(0,a.jsx)(g.eb,{value:"Work Started",children:"Work Started"}),(0,a.jsx)(g.eb,{value:"Completed",children:"Completed"})]})]}),(0,a.jsxs)(l.$,{size:"sm",variant:"outline",onClick:()=>E(e),children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-1"}),"View Details"]})]})]})]})]},e._id))}),(0,a.jsx)(j.lG,{open:D,onOpenChange:$,children:(0,a.jsxs)(j.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(j.c7,{children:(0,a.jsx)(j.L3,{children:"Field Instruction Details"})}),P&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-lg",children:P.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:P.instructionType})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.E,{className:L[P.priority],children:P.priority}),(0,a.jsx)(n.E,{className:R[P.status],children:P.status})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Location:"})," ",P.location||"Not specified"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Assigned To:"})," ",P.assignedTo||"Not assigned"]}),P.dueDate&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Due Date:"})," ",(0,f.GP)(new Date(P.dueDate),"PPP")]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Created:"})," ",(0,f.GP)(new Date(P.createdAt),"PPP")]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium mb-2",children:"Description"}),(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:P.description})]}),P.materials&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium mb-2",children:"Required Materials"}),(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:P.materials})]}),P.tools&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium mb-2",children:"Required Tools"}),(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:P.tools})]}),P.safetyNotes&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium mb-2",children:"Safety Notes"}),(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap text-red-600",children:P.safetyNotes})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h5",{className:"font-medium mb-3",children:["Work Steps (",P.steps?.length||0,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:P.steps?.map(e=>a.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-medium",children:e.order}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(d.S,{checked:e.completed,onCheckedChange:s=>J(P._id,e.id,s),className:"mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm ${e.completed?"line-through text-muted-foreground":""}`,children:e.description}),e.completed&&e.completedAt&&a.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Completed ",f.GP(new Date(e.completedAt),"PPp")]})]})]})})]},e.id))||(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No steps defined"})}),(0,a.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-2",children:[(0,a.jsx)("span",{children:"Overall Progress"}),(0,a.jsxs)("span",{children:[W(P),"%"]})]}),(0,a.jsx)(c.k,{value:W(P),className:"h-2"})]})]}),P.images.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h5",{className:"font-medium mb-2",children:["Reference Photos (",P.images.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:P.images.map((e,s)=>(0,a.jsx)("img",{src:e.url,alt:`Instruction photo ${s+1}`,className:"w-full h-32 object-cover rounded-md"},s))})]})]})]})})]})}},55192:(e,s,t)=>{t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n,wL:()=>m});var a=t(60687),r=t(43210),l=t(96241);let i=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let n=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let d=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle";let c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));c.displayName="CardDescription";let o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent";let m=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s}));m.displayName="CardFooter"},56924:(e,s,t)=>{t.d(s,{V:()=>c});var a=t(60687);t(43210);var r=t(47033),l=t(14952),i=t(61109),n=t(96241),d=t(24934);function c({className:e,classNames:s,showOutsideDays:t=!0,...c}){return(0,a.jsx)(i.hv,{showOutsideDays:t,className:(0,n.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,n.cn)((0,d.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,n.cn)((0,d.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({...e})=>(0,a.jsx)(r.A,{className:"h-4 w-4"}),IconRight:({...e})=>(0,a.jsx)(l.A,{className:"h-4 w-4"})},...c})}c.displayName="Calendar"},61470:(e,s,t)=>{t.d(s,{default:()=>T});var a=t(60687),r=t(43210),l=t(24934),i=t(55192),n=t(59821),d=t(93437),c=t(96474),o=t(10022),m=t(5336),x=t(97992),h=t(13861),p=t(37826),u=t(85650),j=t(68988),g=t(15616),f=t(39390),N=t(63974),v=t(56924),y=t(33135),b=t(40228),w=t(11860),C=t(96241),S=t(52581),P=t(57027);let k=["General Observation","Issue/Problem","Safety Concern","Quality Check","Material Delivery","Equipment Issue","Weather Impact","Other"],A=[{value:"low",label:"Low",color:"bg-green-100 text-green-800"},{value:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"High",color:"bg-red-100 text-red-800"},{value:"critical",label:"Critical",color:"bg-red-600 text-white"}];function F({apartmentId:e,onSuccess:s,onCancel:t}){let[i,n]=(0,r.useState)(!1),[d,c]=(0,r.useState)(new Date),[o,m]=(0,r.useState)(""),[x,h]=(0,r.useState)("medium"),[p,F]=(0,r.useState)(""),[D,T]=(0,r.useState)(""),[L,R]=(0,r.useState)(""),[$,I]=(0,r.useState)([]),[E,W]=(0,r.useState)([]),J=e=>{I(s=>s.filter((s,t)=>t!==e)),W(s=>{let t=s.filter((s,t)=>t!==e);return URL.revokeObjectURL(s[e]),t})},O=async t=>{if(t.preventDefault(),!o){S.o.error("Please select a note type");return}if(!p.trim()){S.o.error("Please enter a title");return}if(!D.trim()){S.o.error("Please enter a description");return}try{n(!0);let t=new FormData;t.append("date",d.toISOString()),t.append("noteType",o),t.append("priority",x),t.append("title",p.trim()),t.append("description",D.trim()),t.append("location",L.trim()),$.forEach((e,s)=>{t.append("photos",e)}),await P.F.createSiteNote(e,t),S.o.success("Site note created successfully"),s()}catch(e){console.error("Failed to create site note:",e),S.o.error("Failed to create site note")}finally{n(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add Site Note"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Log observations, issues, or important information about the site."})]}),(0,a.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"date",children:"Date"}),(0,a.jsxs)(y.AM,{children:[(0,a.jsx)(y.Wv,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",className:(0,C.cn)("w-full justify-start text-left font-normal",!d&&"text-muted-foreground"),children:[(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4"}),d?(0,u.GP)(d,"PPP"):"Select a date"]})}),(0,a.jsx)(y.hl,{className:"w-auto p-0",children:(0,a.jsx)(v.V,{mode:"single",selected:d,onSelect:e=>e&&c(e),initialFocus:!0})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"noteType",children:"Note Type"}),(0,a.jsxs)(N.l6,{value:o,onValueChange:m,children:[(0,a.jsx)(N.bq,{children:(0,a.jsx)(N.yv,{placeholder:"Select note type"})}),(0,a.jsx)(N.gC,{children:k.map(e=>(0,a.jsx)(N.eb,{value:e,children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"priority",children:"Priority"}),(0,a.jsxs)(N.l6,{value:x,onValueChange:h,children:[(0,a.jsx)(N.bq,{children:(0,a.jsx)(N.yv,{})}),(0,a.jsx)(N.gC,{children:A.map(e=>(0,a.jsx)(N.eb,{value:e.value,children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:`px-2 py-1 rounded text-xs ${e.color}`,children:e.label})})},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"location",children:"Location (Optional)"}),(0,a.jsx)(j.p,{id:"location",value:L,onChange:e=>R(e.target.value),placeholder:"e.g., Kitchen, Bathroom, Exterior"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"title",children:"Title"}),(0,a.jsx)(j.p,{id:"title",value:p,onChange:e=>F(e.target.value),placeholder:"Brief title for the note",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(g.T,{id:"description",value:D,onChange:e=>T(e.target.value),placeholder:"Detailed description of the observation or issue...",rows:4,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{children:"Photos (Optional)"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.p,{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let s=Array.from(e.target.files||[]),t=s.filter(e=>e.type.startsWith("image/"));if(t.length!==s.length){S.o.error("Please select only image files");return}if($.length+t.length>5){S.o.error("Maximum 5 photos allowed");return}I(e=>[...e,...t]),t.forEach(e=>{let s=URL.createObjectURL(e);W(e=>[...e,s])})},className:"flex-1"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[$.length,"/5"]})]}),E.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:E.map((e,s)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e,alt:`Site note photo ${s+1}`,className:"w-full h-24 object-cover rounded-md"}),(0,a.jsx)(l.$,{type:"button",size:"sm",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>J(s),children:(0,a.jsx)(w.A,{className:"h-3 w-3"})})]},s))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,a.jsx)(l.$,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),(0,a.jsx)(l.$,{type:"submit",disabled:i,children:i?"Creating...":"Create Note"})]})]})]})}let D={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-red-100 text-red-800",critical:"bg-red-600 text-white"};function T({apartmentId:e}){let[s,t]=(0,r.useState)([]),[j,g]=(0,r.useState)(!0),[f,N]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),[C,k]=(0,r.useState)(!1),A=async()=>{try{g(!0),N("");let s=await P.F.getSiteNotes(e);t(s)}catch(e){console.error("Failed to fetch site notes:",e),N(e?.response?.data?.message||"Failed to load site notes"),S.o.error("Failed to load site notes")}finally{g(!1)}},T=e=>{w(e),k(!0)},L=e=>{let t=s.filter(s=>s.priority===e).length;return console.log(`Priority count for "${e}":`,t,"Notes:",s.map(e=>e.priority)),t},R=async(e,s)=>{try{await P.F.toggleCompletion(e,s),A(),S.o.success(s?"Site note marked as completed":"Site note marked as incomplete")}catch(e){console.error("Failed to update site note completion:",e),S.o.error("Failed to update site note completion")}};if(j)return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Site Notes"}),(0,a.jsxs)(l.$,{disabled:!0,children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Add Note"]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:[1,2,3].map(e=>(0,a.jsx)(i.Zp,{className:"animate-pulse",children:(0,a.jsxs)(i.Wu,{className:"p-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})},e))})]});if(f)return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Site Notes"}),(0,a.jsxs)(l.$,{onClick:A,children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Add Note"]})]}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:f}),(0,a.jsx)(l.$,{onClick:A,variant:"outline",children:"Try Again"})]})]});let $=s.filter(e=>"Critical"===e.priority||"High"===e.priority);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Site Notes"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[s.length," notes • ",$.length," high priority"]})]}),(0,a.jsxs)(p.lG,{open:v,onOpenChange:y,children:[(0,a.jsx)(p.zM,{asChild:!0,children:(0,a.jsxs)(l.$,{children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Add Note"]})}),(0,a.jsxs)(p.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(p.c7,{children:(0,a.jsx)(p.L3,{children:"Add Site Note"})}),(0,a.jsx)(F,{apartmentId:e,onSuccess:()=>{y(!1),A()},onCancel:()=>y(!1)})]})]})]}),s.length>0&&(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,a.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-green-600",children:"Low"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-green-800",children:L("Low")})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-yellow-600",children:"Medium"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-yellow-800",children:L("Medium")})]}),(0,a.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-red-600",children:"High"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-red-800",children:L("High")})]}),(0,a.jsxs)("div",{className:"bg-red-100 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-red-700",children:"Critical"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-red-900",children:L("Critical")})]})]}),0===s.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(o.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No site notes yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Start logging observations and issues"})]}):(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)(i.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(i.ZB,{className:`text-base ${e.completed?"line-through text-muted-foreground":""}`,children:e.title}),(0,a.jsx)(n.E,{className:D[e.priority],children:e.priority}),e.completed&&(0,a.jsxs)(n.E,{className:"bg-green-100 text-green-800",children:[(0,a.jsx)(m.A,{className:"h-3 w-3 mr-1"}),"Completed"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.A,{className:"h-3 w-3"}),e.noteType]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"h-3 w-3"}),e.location||"No location"]})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:e.description})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:e.images.length>0&&(0,a.jsxs)(n.E,{variant:"outline",children:[e.images.length," photos"]})})]})}),(0,a.jsx)(i.Wu,{className:"pt-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.S,{checked:e.completed,onCheckedChange:s=>R(e._id,s)}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Created ",(0,u.GP)(new Date(e.createdAt),"PPp"),e.completed&&e.completedAt&&(0,a.jsxs)("div",{className:"text-xs text-green-600",children:["Completed ",(0,u.GP)(new Date(e.completedAt),"PPp")]})]})]}),(0,a.jsxs)(l.$,{size:"sm",variant:"outline",onClick:()=>T(e),children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-1"}),"View Details"]})]})})]},e._id))}),(0,a.jsx)(p.lG,{open:C,onOpenChange:k,children:(0,a.jsxs)(p.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(p.c7,{children:(0,a.jsx)(p.L3,{children:"Site Note Details"})}),b&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:b.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,u.GP)(new Date(b.createdAt),"PPP")})]}),(0,a.jsx)(n.E,{className:D[b.priority],children:b.priority})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Type:"})," ",b.noteType]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Location:"})," ",b.location||"Not specified"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium mb-2",children:"Description"}),(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:b.description})]}),b.images.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h5",{className:"font-medium mb-2",children:["Photos (",b.images.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:b.images.map((e,s)=>(0,a.jsx)("img",{src:e.url,alt:`Site note photo ${s+1}`,className:"w-full h-32 object-cover rounded-md"},s))})]})]})]})})]})}},63974:(e,s,t)=>{t.d(s,{bq:()=>x,eb:()=>j,gC:()=>u,l6:()=>o,yv:()=>m});var a=t(60687),r=t(43210),l=t(97822),i=t(78272),n=t(3589),d=t(13964),c=t(96241);let o=l.bL;l.YJ;let m=l.WT,x=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.l9,{ref:r,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]}));x.displayName=l.l9.displayName;let h=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})}));h.displayName=l.PP.displayName;let p=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})}));p.displayName=l.wn.displayName;let u=r.forwardRef(({className:e,children:s,position:t="popper",...r},i)=>(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:i,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[(0,a.jsx)(h,{}),(0,a.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(p,{})]})}));u.displayName=l.UC.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=l.JU.displayName;let j=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.q7,{ref:r,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:s})]}));j.displayName=l.q7.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.wv.displayName},68988:(e,s,t)=>{t.d(s,{p:()=>i});var a=t(60687),r=t(43210),l=t(96241);let i=r.forwardRef(({className:e,type:s,...t},r)=>(0,a.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));i.displayName="Input"},83580:(e,s,t)=>{t.d(s,{default:()=>S});var a=t(60687),r=t(43210),l=t(24934),i=t(55192),n=t(59821),d=t(96474),c=t(40228),o=t(48730),m=t(9005),x=t(13861),h=t(37826),p=t(85650),u=t(68988),j=t(15616),g=t(39390),f=t(56924),N=t(33135),v=t(11860),y=t(96241),b=t(52581),w=t(20971);function C({apartmentId:e,onSuccess:s,onCancel:t}){let[i,n]=(0,r.useState)(!1),[d,o]=(0,r.useState)(new Date),[m,x]=(0,r.useState)(""),[h,C]=(0,r.useState)(8),[S,P]=(0,r.useState)([]),[k,A]=(0,r.useState)([]),F=e=>{P(s=>s.filter((s,t)=>t!==e)),A(s=>{let t=s.filter((s,t)=>t!==e);return URL.revokeObjectURL(s[e]),t})},D=async t=>{if(t.preventDefault(),!m.trim()){b.o.error("Please enter a work description");return}if(h<=0||h>24){b.o.error("Please enter valid hours worked (1-24)");return}try{n(!0);let t=new FormData;t.append("date",d.toISOString()),t.append("workDescription",m.trim()),t.append("hoursWorked",h.toString()),S.forEach((e,s)=>{t.append("photos",e)}),await w.L.createProgressEntry(e,t),b.o.success("Progress entry created successfully"),s()}catch(e){console.error("Failed to create progress entry:",e),b.o.error("Failed to create progress entry")}finally{n(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add Daily Progress Entry"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Log your daily work progress with photos and descriptions."})]}),(0,a.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g.J,{htmlFor:"date",children:"Date"}),(0,a.jsxs)(N.AM,{children:[(0,a.jsx)(N.Wv,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"outline",className:(0,y.cn)("w-full justify-start text-left font-normal",!d&&"text-muted-foreground"),children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),d?(0,p.GP)(d,"PPP"):"Select a date"]})}),(0,a.jsx)(N.hl,{className:"w-auto p-0",children:(0,a.jsx)(f.V,{mode:"single",selected:d,onSelect:e=>e&&o(e),initialFocus:!0})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g.J,{htmlFor:"hoursWorked",children:"Hours Worked"}),(0,a.jsx)(u.p,{id:"hoursWorked",type:"number",min:"0.5",max:"24",step:"0.5",value:h,onChange:e=>C(parseFloat(e.target.value)||0),placeholder:"8"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g.J,{htmlFor:"workDescription",children:"Work Description"}),(0,a.jsx)(j.T,{id:"workDescription",value:m,onChange:e=>x(e.target.value),placeholder:"Describe the work completed today...",rows:4,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g.J,{children:"Photos (Optional)"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.p,{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let s=Array.from(e.target.files||[]),t=s.filter(e=>e.type.startsWith("image/"));if(t.length!==s.length){b.o.error("Please select only image files");return}if(S.length+t.length>10){b.o.error("Maximum 10 photos allowed");return}P(e=>[...e,...t]),t.forEach(e=>{let s=URL.createObjectURL(e);A(e=>[...e,s])})},className:"flex-1"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[S.length,"/10"]})]}),k.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:k.map((e,s)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:e,alt:`Progress photo ${s+1}`,className:"w-full h-24 object-cover rounded-md"}),(0,a.jsx)(l.$,{type:"button",size:"sm",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>F(s),children:(0,a.jsx)(v.A,{className:"h-3 w-3"})})]},s))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,a.jsx)(l.$,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),(0,a.jsx)(l.$,{type:"submit",disabled:i,children:i?"Creating...":"Create Entry"})]})]})]})}function S({apartmentId:e}){let[s,t]=(0,r.useState)([]),[u,j]=(0,r.useState)(!0),[g,f]=(0,r.useState)(""),[N,v]=(0,r.useState)(!1),[y,S]=(0,r.useState)(null),[P,k]=(0,r.useState)(!1),A=async()=>{try{j(!0),f("");let s=await w.L.getProgressEntries(e);t(s)}catch(e){console.error("Failed to fetch progress entries:",e),f(e?.response?.data?.message||"Failed to load progress entries"),b.o.error("Failed to load progress entries")}finally{j(!1)}},F=e=>{S(e),k(!0)};return u?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Project Progress"}),(0,a.jsxs)(l.$,{disabled:!0,children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Add Entry"]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:[1,2,3].map(e=>(0,a.jsx)(i.Zp,{className:"animate-pulse",children:(0,a.jsxs)(i.Wu,{className:"p-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})},e))})]}):g?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Project Progress"}),(0,a.jsxs)(l.$,{onClick:A,children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Add Entry"]})]}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:g}),(0,a.jsx)(l.$,{onClick:A,variant:"outline",children:"Try Again"})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Project Progress"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[s.length," entries • ",s.reduce((e,s)=>e+s.hoursWorked,0)," hours • ",s.reduce((e,s)=>e+s.photos.length,0)," photos"]})]}),(0,a.jsxs)(h.lG,{open:N,onOpenChange:v,children:[(0,a.jsx)(h.zM,{asChild:!0,children:(0,a.jsxs)(l.$,{children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Add Entry"]})}),(0,a.jsxs)(h.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(h.c7,{children:(0,a.jsx)(h.L3,{children:"Add Progress Entry"})}),(0,a.jsx)(C,{apartmentId:e,onSuccess:()=>{v(!1),A()},onCancel:()=>v(!1)})]})]})]}),0===s.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(c.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No progress entries yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Start logging your daily work progress"})]}):(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)(i.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(i.ZB,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),(0,p.GP)(new Date(e.date),"PPP")]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:e.workDescription})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(n.E,{variant:"outline",children:[(0,a.jsx)(o.A,{className:"h-3 w-3 mr-1"}),e.hoursWorked,"h"]}),e.photos.length>0&&(0,a.jsxs)(n.E,{variant:"outline",children:[(0,a.jsx)(m.A,{className:"h-3 w-3 mr-1"}),e.photos.length]})]})]})}),(0,a.jsx)(i.Wu,{className:"pt-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Created ",(0,p.GP)(new Date(e.createdAt),"PPp")]}),(0,a.jsxs)(l.$,{size:"sm",variant:"outline",onClick:()=>F(e),children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-1"}),"View Details"]})]})})]},e._id))}),(0,a.jsx)(h.lG,{open:P,onOpenChange:k,children:(0,a.jsxs)(h.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(h.c7,{children:(0,a.jsx)(h.L3,{children:"Progress Entry Details"})}),y&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:(0,p.GP)(new Date(y.date),"PPP")}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[y.hoursWorked," hours worked"]})]}),(0,a.jsxs)(n.E,{variant:"outline",children:[(0,a.jsx)(o.A,{className:"h-3 w-3 mr-1"}),y.hoursWorked,"h"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium mb-2",children:"Work Description"}),(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:y.workDescription})]}),y.photos.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h5",{className:"font-medium mb-2",children:["Photos (",y.photos.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:y.photos.map((e,s)=>(0,a.jsx)("img",{src:e,alt:`Progress photo ${s+1}`,className:"w-full h-32 object-cover rounded-md"},s))})]})]})]})})]})}},85910:(e,s,t)=>{t.d(s,{Tabs:()=>n,TabsContent:()=>o,TabsList:()=>d,TabsTrigger:()=>c});var a=t(60687),r=t(43210),l=t(55146),i=t(96241);let n=l.bL,d=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.B8,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));d.displayName=l.B8.displayName;let c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.l9,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));c.displayName=l.l9.displayName;let o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.UC,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=l.UC.displayName},86287:(e,s,t)=>{t.d(s,{k:()=>n});var a=t(60687),r=t(43210),l=t(25177),i=t(96241);let n=r.forwardRef(({className:e,value:s,...t},r)=>(0,a.jsx)(l.bL,{ref:r,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:(0,a.jsx)(l.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));n.displayName=l.bL.displayName},93437:(e,s,t)=>{t.d(s,{S:()=>d});var a=t(60687),r=t(43210),l=t(40211),i=t(13964),n=t(96241);let d=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.bL,{ref:t,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:(0,a.jsx)(l.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})}));d.displayName=l.bL.displayName}};