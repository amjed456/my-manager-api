(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{1237:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(5155),a=t(2115),l=t(6874),n=t.n(l),i=t(5695),d=t(7168),c=t(4616);let o=(0,t(9946).A)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var u=t(5784),m=t(9852),x=t(8482),f=t(1397),p=t(8145),h=t(5525),j=t(4186),y=t(350);function g(e){let{searchQuery:s="",statusFilter:t="all",sortBy:l="newest"}=e,d=(0,i.useRouter)(),[c,o]=(0,a.useState)([]),[u,m]=(0,a.useState)(!0),[g,N]=(0,a.useState)(""),[w,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{if(!y.y1.isAuthenticated()){d.push("/");return}m(!0);try{let e=await y.y1.getProfile();v(e._id),console.log("Current user ID:",e._id)}catch(e){console.error("Failed to fetch user profile:",e)}let e=await y.$p.getAllProjects();console.log("Fetched projects:",e),o(e),N("")}catch(s){var e;if(console.error("Failed to fetch projects:",s),(null==s?void 0:null===(e=s.response)||void 0===e?void 0:e.status)===401){y.y1.logout(),d.push("/");return}N("Failed to load projects. Please try again later.")}finally{m(!1)}})()},[d]);let b=(0,a.useMemo)(()=>{let e=c.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.description.toLowerCase().includes(s.toLowerCase()));if("all"!==t){let s={planning:"Planning","in-progress":"In Progress",completed:"Completed"};e=e.filter(e=>e.status===s[t])}return e.sort((e,s)=>{switch(l){case"newest":return new Date(s.createdAt||"").getTime()-new Date(e.createdAt||"").getTime();case"oldest":return new Date(e.createdAt||"").getTime()-new Date(s.createdAt||"").getTime();case"deadline":return new Date(e.dueDate).getTime()-new Date(s.dueDate).getTime();case"progress":return s.progress-e.progress;default:return 0}})},[c,s,t,l]);if(u)return(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading projects..."})});if(g)return(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-red-500",children:g})});if(0===b.length)return(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No projects found matching your criteria."})});let C=e=>!!w&&("string"==typeof e.owner?e.owner===w:e.owner._id===w);return(0,r.jsx)("div",{className:"space-y-4",children:b.map(e=>{if(!e._id)return console.error("Project with missing ID:",e),null;let s=C(e);return(0,r.jsx)(n(),{href:"/projects/details?id=".concat(e._id),children:(0,r.jsx)(x.Zp,{className:"hover:bg-muted/50 transition-colors",children:(0,r.jsxs)(x.Wu,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("h3",{className:"font-medium",children:e.name}),s&&(0,r.jsxs)(p.E,{className:"ml-2 bg-blue-500",variant:"secondary",children:[(0,r.jsx)(h.A,{className:"h-3 w-3 mr-1"}),"Owner"]})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]}),(0,r.jsx)(p.E,{variant:"Completed"===e.status?"default":"outline",className:"ml-2",children:e.status})]}),(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Progress"}),(0,r.jsxs)("span",{children:[e.progress,"%"]})]}),(0,r.jsx)(f.k,{value:e.progress,className:"h-2"})]}),(0,r.jsx)("div",{className:"flex justify-between mt-4",children:(0,r.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,r.jsx)(j.A,{className:"h-4 w-4 mr-1"}),(0,r.jsxs)("span",{children:["Due: ",new Date(e.dueDate).toLocaleDateString()]})]})})]})})},e._id)})})}var N=t(6064),w=t(9060),v=t(6671);function b(){let e=(0,i.useRouter)(),[s,t]=(0,a.useState)(""),[l,x]=(0,a.useState)("all"),[f,p]=(0,a.useState)("newest");return(0,a.useEffect)(()=>{y.y1.isAuthenticated()||e.push("/")},[e]),(0,r.jsxs)("div",{className:"flex min-h-screen flex-col pb-16",children:[(0,r.jsx)(w.A,{onSignOut:()=>{y.y1.logout(),v.o.success("Signed out successfully"),e.push("/")},children:(0,r.jsx)(n(),{href:"/projects/new",children:(0,r.jsxs)(d.$,{size:"sm",children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"New Project"]})})}),(0,r.jsx)("h1",{className:"text-xl font-bold text-center my-4",children:"Projects"}),(0,r.jsx)("div",{className:"p-4 border-b",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(o,{className:"h-4 w-4 mr-2 text-muted-foreground"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Filters"})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(m.p,{type:"text",placeholder:"Search projects...",className:"w-full",value:s,onChange:e=>t(e.target.value)})}),(0,r.jsxs)(u.l6,{defaultValue:"all",onValueChange:x,value:l,children:[(0,r.jsx)(u.bq,{className:"w-full sm:w-[150px]",children:(0,r.jsx)(u.yv,{placeholder:"Status"})}),(0,r.jsxs)(u.gC,{children:[(0,r.jsx)(u.eb,{value:"all",children:"All Status"}),(0,r.jsx)(u.eb,{value:"planning",children:"Planning"}),(0,r.jsx)(u.eb,{value:"in-progress",children:"In Progress"}),(0,r.jsx)(u.eb,{value:"completed",children:"Completed"})]})]}),(0,r.jsxs)(u.l6,{defaultValue:"newest",onValueChange:p,value:f,children:[(0,r.jsx)(u.bq,{className:"w-full sm:w-[150px]",children:(0,r.jsx)(u.yv,{placeholder:"Sort By"})}),(0,r.jsxs)(u.gC,{children:[(0,r.jsx)(u.eb,{value:"newest",children:"Newest First"}),(0,r.jsx)(u.eb,{value:"oldest",children:"Oldest First"}),(0,r.jsx)(u.eb,{value:"deadline",children:"Deadline"}),(0,r.jsx)(u.eb,{value:"progress",children:"Progress"})]})]})]})]})}),(0,r.jsx)("div",{className:"p-4 flex-1",children:(0,r.jsx)(g,{searchQuery:s,statusFilter:l,sortBy:f})}),(0,r.jsx)(N.A,{})]})}},1397:(e,s,t)=>{"use strict";t.d(s,{k:()=>i});var r=t(5155),a=t(2115),l=t(5863),n=t(3999);let i=a.forwardRef((e,s)=>{let{className:t,value:a,...i}=e;return(0,r.jsx)(l.bL,{ref:s,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:(0,r.jsx)(l.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});i.displayName=l.bL.displayName},5525:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5784:(e,s,t)=>{"use strict";t.d(s,{bq:()=>m,eb:()=>h,gC:()=>p,l6:()=>o,yv:()=>u});var r=t(5155),a=t(2115),l=t(8715),n=t(6474),i=t(7863),d=t(5196),c=t(3999);let o=l.bL;l.YJ;let u=l.WT,m=a.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(l.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[a,(0,r.jsx)(l.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let x=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let f=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});f.displayName=l.wn.displayName;let p=a.forwardRef((e,s)=>{let{className:t,children:a,position:n="popper",...i}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,r.jsx)(x,{}),(0,r.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(f,{})]})})});p.displayName=l.UC.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a})}).displayName=l.JU.displayName;let h=a.forwardRef((e,s)=>{let{className:t,children:a,...n}=e;return(0,r.jsxs)(l.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})}),(0,r.jsx)(l.p4,{children:a})]})});h.displayName=l.q7.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=l.wv.displayName},5860:(e,s,t)=>{Promise.resolve().then(t.bind(t,1237))},8482:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>i,wL:()=>u});var r=t(5155),a=t(2115),l=t(3999);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});n.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent";let u=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},9060:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var r=t(5155),a=t(4835),l=t(6766),n=t(7168);function i(e){let{onSignOut:s,children:t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(l.default,{src:"/placeholder-logo.svg",alt:"Project Manager Logo",width:32,height:32,className:"mr-2"})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[t,(0,r.jsxs)(n.$,{variant:"outline",size:"sm",onClick:s,children:[(0,r.jsx)(a.A,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}},9852:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var r=t(5155),a=t(2115),l=t(3999);let n=a.forwardRef((e,s)=>{let{className:t,type:a,...n}=e;return(0,r.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"}},e=>{var s=s=>e(e.s=s);e.O(0,[671,280,89,267,576,945,441,684,358],()=>s(5860)),_N_E=e.O()}]);